---
layout: post
title: react 使用小结
category: reactRedux
subtitle: react 技术栈
tags:
    - reactRedux
    - 前端开发
---
<h2>{{ page.title }}</h2>
<blockquote>
    <P>react 使用小结</P>
</blockquote>
<p>{{ page.date | date_to_string }}</p>
<h3>
    你可能遇到过的问题
</h3>
<p>如果你经历的项目中包含很多的增删改查页面，这些页面中一般都会有很多表单元素，以使用户可以自由的新建和修改自己可以操作的数据。这时，网页中的每个表单，你都需要控制他们的状态，获取数据，在用户进行修改数据时，你还需要将初始值显示在对应的表单中。</p>

<p>这种情况在增删改查为主的页面中见的很多，一般情况下，我们会一个个的罗列出每个表单元素，然后根据实际需求进行相关的配置，以使表单按照预期运行。但是当某个表单与元素的运行不合预期时，你就要“痛苦的”在茫茫多的表单中进行查找，最终你会找到自己想要修改的元素，然后进行修改，刷新页面，然后查看是否符合预期。当你多次修改后，你会发现你自己开始“讨厌”自己写的代码，因为你在茫茫多的代码中查找时，你会越来越烦躁，因为你找的很慢，而且代码越来越到，找到你想修改的代码就需要更多的时间。</p>

<h3>思考下怎么解决</h3>
<h4>在真正解决问题之前，我们思考一个简单的问题</h4>
<p>在没有 react 等等框架的时代，我们依然有很多组件可以用，他们是别人定义好的一些 html 元素，我们在使用时，传递一些简单的参数，他就可以按照我们的预期进行工作，当时用的也非常开心。现在 react 等框架的出现，虽然我们很少使用那些组件了，但是你可以从他们的身上看到我们面临的问题的解决办法。</p>

<p>想一下你是用那些组件的方法，传入一系列配置，然后引入相关的样式和 js 文件，然后这些组件就可以按照预期显示和操作。再想想现在，我们依然需要引入 react.js 等一系列文件，然后我们定义自己的视图类，然后我们就可以看到预期的显示，是不是这两种模式是一样的，不同的是，你前面使用组件时，你是传入配置，可能就是下面的伪代码</p>

{% highlight javascript %}
    // 可能你使用的是一个弹窗组件
    const diglog = new Diglog(config);
    //... 一系列代码 ... 
{% endhighlight %}

<p>可能是这样子的代码，也可能你会很陌生，但是你不得不承认，他是在实例化一个类，然后就可以根据自己的需要调用这个类上的相关方法和属性</p>

<h3>这时，思路油然而生</h3>

<p>首先，思考一下，配置文件，我们都应该写过，我们是不是可以将我们需要的表单元素写成一个个配置，然后再定义一个生成函数，去解析这解析配置文件，最终生成我们需要的表单元素，这不就跟上面的组件相似了吗！！</p>

<h4>先思考一下我们要怎么做</h4>

<p>我的思路如下：</p>

<ul>
    <li>1. 根据自己的实际情写好自己的配置文件</li>
    <li>2. 写好自己的数据转换函数，并与自己的配置对应</li>
    <li>3. 定义自己的视图生成函数</li>
</ul>

<p>基本上这三步就完成了对应需要的视图的定义，这些看起来可能很抽象，下面会给出一些例子，帮助你进行理解</p>

<p>1. 基本的配置文件</p>

{% highlight javascript %} 
    // 一般每个表单项，我会定义一下的配置
     const config = [{ 
         labelName: "通用配置", 
         fieldName: "generalConfiguration", 
         placeHolder："请输入内容", 
         childData: [], // select 需要
         type: "SELECT", // or INPUT initVaule: "initVaule", 
         optionField: ["idName", "showName"], 
         span: 3, // 布局相关 
         classname：“ssss”，
         style: {}, 
         offset: 0 // 往右移动的布局 
         disabled: false, // 是否禁用 
         formItemLayout：{ { span: 14, push: 1 }, },// 标签和选择框的布局 
         isRequired: true, 
         alidationRules: { massage: "日了狗了，不能为空这个", 
         validationFun：function // 参数与 antd
         onChange: function // 数据改变时的回调 参数 字段名称 字段对应的表单值 
         selfCreateOption：function // 自定义生成option 的函数 参数 字段名称 
         initValue childData
    }]
{% endhighlight %}

<p>上面的配置是一个示例，但绝不是模板，你可以参考这个定制你自己的配置项，这样子你在维护时才能得心应手</p>
<p>至于后两步，针对 react 而言，是两个函数，一个是数据处理，一个是视图生成，需要你根据自己的实际需要去手动完成，这里就不给出具体的示例，因为实在没必要</p>







