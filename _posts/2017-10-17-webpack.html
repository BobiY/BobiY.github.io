---
layout: default
title: webpack基础
---
<link rel="stylesheet" href="{{ site.baseurl }}/assets/style.css">
<link rel="stylesheet" href="{{ site.baseurl }}/css/webpack.css">
<h2>{{ page.title }}</h2>
<p>我的第一篇文章</p>
<p>{{ page.date | date_to_string }}</p>

<h3>安装Nodejs</h3>

<p>webpack是一个前端流行的打包和编译工具，在学习以前，需要你确认你的电脑上已经安装好 nodejs</p>

<h3>下面，我们将以一个简单的路由项目来展示webpack的用法</h3>

<p>首先，你需要找个目录，新建一个加 simple 的文件夹，我们的示例项目将会在这里面展开.下面是目录结构，仅供参考</p>
<p class="back">
    ├── dist &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                    打包输出目录, 只需部署这个目录到生产环境<br />
    ├── package.json  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            项目配置信息 <br />
    ├── node_modules  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            npm安装的依赖包都在这里面 <br />
    ├── src      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                 我们的源代码 <br />
    │   ├── components   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         可以复用的模块放在这里面 <br />
    │   ├── index.html   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         入口html <br />
    │   ├── index.js   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           入口js <br />
    │   ├── libs       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          不在npm和git上的库扔这里 <br />
    │   └── views        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           页面放这里 <br />
    └── webpack.config.js   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        webpack 配置文件 <br />
</p>

<p>然后在你刚才建的simple文件夹中打开命令行，输入 npm init</p>
<p>这时会生成一些项目的配置信息，这里可以一路回车下去，最终，会将这些信息会默认生成到 package.json 的文件中</p>
<h3 class="title">给项目加上语法报错和代码规范检查</h3>
<p>这里要安装 esLint 来对你的代码的正确性做出判断，这个检测对于新手来说不太友好，往往会产生意想不到的报错，虽然只是你书写的 js 语法部分，当然，现在的一些编辑器也有同样的功能</p>

<p class="back">
    npm install eslint eslint-config-enough eslint-loader --save-dev
</p>
<p>
    npm 允许你一次安装多个包，这些包的名字用空格隔开即可，这些包会被安装进 node_modules 目录下
</p>
<p>
    这里说一下 --save-dev 和 --save 的异同：&nbsp;&nbsp;&nbsp; --save-dev会把安装的包和版本号记录到package.json中的devDependencies对象中, 还有一个--save, 会记录到dependencies对象中, 它们的区别, 我们可以先简单的理解为打包工具和测试工具用到的包使用--save-dev存到devDependencies, 比如eslint, webpack. 浏览器中执行的js用到的包存到dependencies, 比如jQuery等. 那么它们用来干嘛的? 
</p>
<p>
    因为有些npm包安装是需要编译的, 那么导致windows/mac/linux上编译出的可执行文件是不同的, 也就是无法通用, 因此我们在提交代码到git上去的时候, 一般都会在.gitignore里指定忽略node_modules目录和里面的文件, 这样其他人从git上拉下来的项目是没有node_modules目录的, 这时我们需要运行
</p>
<p class="back">
    npm install
</p>
<p>
    它会读取package.json中的devDependencies和dependencies字段, 把记录的包的相应版本下载下来.
</p>
<p>
    这里eslint-config-enough是配置文件, 它规定了代码规范, 要使它生效, 我们要在package.json中添加内容:
</p>
<p class="back">
    { <br />
        "eslintConfig": { <br />
          "extends": "enough", <br />
          "env": { <br />
            "browser": true, <br />
            "node": true <br />
          } <br />
        } <br />
      } <br />
</p>

{% highlight javascript %}
// 引入全局对象
import g from '../../global'

// 引入html模板, 会被作为字符串引入
import template from './index.html'

// 引入css, 会生成 style 块插入到 head 头中
import './style.css'

// 导出类
export default class {
  mount(container) {
    document.title = 'foo'
    container.innerHTML = template
    container.querySelector('.foo__gobar').addEventListener('click', () => {
      // 调用router.go方法加载 /bar 页面
      g.router.go('/bar')
    })
  }
}
{% endhighlight %}




